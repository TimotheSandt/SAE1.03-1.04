{% extends "layout.html" %}

{% block title %}
Location
{% endblock %}


{% block body %}

<form action="/location/etat/locataire" method="POST">
    <label for="locataire">Locataire :</label>
    <select name="locataire" id="locataire" required>
        <option value="" disabled selected hidden>Veuillez sélectionner un locataire</option>
        <option value="best">Meilleurs locataire</option>
        <option value="pire">Pire locataire</option>
        {% for locataire in locataires %}
            <option value="{{ locataire.id }}">{{ locataire.nom_prenom }}</option>
        {% endfor %}
    </select>
    <button type="submit">Voir l'état</button>
</form>

<div>
    <h1>Etat pour {{ individu.nom_prenom }} </h1>

    <h3>Vélo</h3>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>Code</th>
                <th>Libellé</th>
                <th>Nombre de location</th>
                <th>duree total</th>
                <th>Montant</th>
            </tr>
        </thead>
        <tbody>
        {% for velo in velos %}
            <tr>
                <td>{{ velo.code_velo }}</td>
                <td>{{ velo.libelle_velo }}</td>
                <td>{{ velo.nb }}</td>
                <td>{{ velo.duree }}</td>
                <td>{{ velo.montant }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>


    <h3>Bailleur</h3>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>id</th>
                <th>Nom</th>
                <th>Nombre de location</th>
                <th>Montant</th>
            </tr>
        </thead>
        <tbody>
        {% for bailleur in individu_concerne %}
            <tr>
                <td>{{ bailleur.id }}</td>
                <td>{{ bailleur.nom_prenom }}</td>
                <td>{{ bailleur.nb }}</td>
                <td>{{ bailleur.montant }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h3>Location Effectuée</h3>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th>id</th>
                <th>prix</th>
                <th>date début</th>
                <th>date fin</th>
                <th>velo</th>
                <th>bailleur</th>          
                <td></td>
            </tr>
        </thead>
        <tbody>
            {% for ligne in locations %}
            <tr>
                    <td>{{ ligne.id }}</td>
                    <td>{{ ligne.prix }}</td>
                    <td>{{ ligne.date_debut }}</td>
                    <td>{{ ligne.date_fin }}</td>
                    <td>{{ ligne.velo }}</td>
                    <td>{{ ligne.bailleur }}</td>
                    <td>{{ ligne.station_id }}</td>
                    <td>
                        <a href="/location/edit?id={{ ligne.id }}">editer</a>&nbsp;
                        <a href="/location/delete?id={{ ligne.id }}" >supprimer</a>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>Prix Total</h3>
    <p>{{ montant_total }}</p>

    <h3>Nombre Location</h3>
    <p>{{ nb_location }}</p>

    <h3>Duree Total</h3>
    <p>{{ duree_total }}</p>



    location effectuer
    prix total
    personne concerné

</div>

{% endblock %}